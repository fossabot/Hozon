<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Hozon</title>
  <link href="main.css" type="text/css" rel="stylesheet" />
  <script>
    function getSource(){
      const {dialog} = require('electron').remote;

      var sourcePath = dialog.showOpenDialog({
        properties: ['openDirectory']
      });
      document.getElementById('source-path').innerHTML = sourcePath;
      document.getElementsByName('copy-source').value = sourcePath;
      console.log(sourcePath);
    }

    function getDestOne(){
      const {dialog} = require('electron').remote;

      var copyPath = dialog.showOpenDialog({
        properties: ['openDirectory']
      });
      document.getElementById('copy-path-one').innerHTML = copyPath;
      document.getElementsByName('copy-path-one').value = copyPath;
      console.log(copyPath);
    }

    function getDestTwo(){
      const {dialog} = require('electron').remote;

      var copyPath = dialog.showOpenDialog({
        properties: ['openDirectory']
      });
      document.getElementById('copy-path-two').innerHTML = copyPath;
      document.getElementsByName('copy-path-two').value = copyPath;
      console.log(copyPath);
    }

    function doCopy(){
      const fs = require('fs-extra');

      var copySource = document.getElementById('source-path').innerHTML;
      var copyPathOne = document.getElementById('copy-path-one').innerHTML;
      var copyPathTwo = document.getElementById('copy-path-two').innerHTML;
      console.log(copySource);
      console.log(copyPathOne);
      console.log(copyPathTwo);

      var firstResult = document.getElementById('first-result');
      firstResult.innerHTML = "Première copie en cours";
      var secondResult = document.getElementById('second-result');
      secondResult.innerHTML = "Seconde copie en cours";

      fs.copy(copySource, copyPathOne, (err) => {
      if (err) return console.error(err);
      firstResult.innerHTML = "Première copie faite avec succès";
      console.log('1 - Yay!');
    })

    fs.copy(copySource, copyPathTwo, (err) => {
    if (err) return console.error(err);
    secondResult.innerHTML = "Seconde copie faite avec succès";
    console.log('2 - Yay!');

});
    }
  </script>
</head>

<body>
  <div class="flex-container">
    <div class="box source">
      <h1 class="title-source">Copier depuis</h1>
      <button id="source-button" onclick="getSource()">Choisir...</button>
      <div id="source-path">

      </div>
    </div>
    <div class="box destination">
      <h1 class="title-dest">Vers</h1>
      <button id="dest-button-one" onclick="getDestOne()">Choisir...</button>
      <div id="copy-path-one">

      </div>
      <button id="dest-button-two" onclick="getDestTwo()">Choisir...</button>
      <div id="copy-path-two">

      </div>
    </div>
  </div>
    <button id="doCopy" onclick="doCopy()">Copier</button>
    <div id="first-result">

    </div>
    <div id="second-result">

    </div>
  <!--progress></progress-->
</body>
</html>
